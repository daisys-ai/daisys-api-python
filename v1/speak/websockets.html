<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Daisys API endpoints" href="endpoints.html" /><link rel="prev" title="Daisys API JSON models" href="models.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Daisys API websockets - daisys-api 1.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-toc-background: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-background-primary: black;
  --color-background-secondary: black;
  --color-foreground-primary: white;
  --color-foreground-secondary: #19AAD8;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-background-primary: black;
  --color-background-secondary: black;
  --color-foreground-primary: white;
  --color-foreground-secondary: #19AAD8;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">daisys-api 1.1.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/daisys-logo-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/daisys-logo.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">daisys-api 1.1.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting_started.html">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started_python.html">Getting started with the Python client library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started_cli.html">Getting started with the command line</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples.html">Daisys API examples</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Daisys API examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/hello_daisys.html">Example: Hello Daisys, synchronous client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/hello_daisys_async.html">Example: Hello Daisys, asynchronous client</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../examples/websocket.html">Daisys API websocket examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Daisys API websocket examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/websocket_example.html">Example: Websocket example, synchronous client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/websocket_example_iter.html">Example: Websocket example, synchronous client with iterator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/websocket_example_async.html">Example: Websocket example, asynchronous client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/websocket_example_async_iter.html">Example: Websocket example, asynchronous client with iterator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/websocket_client.html">Example: Websocket example, web client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/tokens_example.html">Example: Using an access token instead of password</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/curl_example.html">Example: <code class="docutils literal notranslate"><span class="pre">curl</span></code> example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../input.html">Daisys API input</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daisys.html">Daisys API top-level object</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html">Daisys API clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Daisys API JSON models</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Daisys API websockets</a></li>
<li class="toctree-l1"><a class="reference internal" href="endpoints.html">Daisys API endpoints</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/v1/speak/websockets.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="daisys-api-websockets">
<span id="v1-speak-websockets"></span><h1>Daisys API websockets<a class="headerlink" href="#daisys-api-websockets" title="Link to this heading">¶</a></h1>
<p>The Daisys API provides a websocket interface to enable direct communication
with a single inference worker node, for applications that require lower
latency.</p>
<section id="latency-vs-throughput">
<h2>Latency vs. throughput<a class="headerlink" href="#latency-vs-throughput" title="Link to this heading">¶</a></h2>
<p>While the websocket connection provides some convenience for certain
applications, it should not be used for tasks where a batch approach is more
appropriate, since generation requests through the REST API get distributed over
multiple workers and will overall finish faster. However, applications that
require real-time or near real-time interaction may benefit from keeping a
connection open and receiving the response immediately without making an extra
HTTP GET request.</p>
<p>Please do keep in mind that an effect of dedicating a connection is that
requests over this connection are effectively serialized, so the decision of
using websocket vs. the REST API is a typical latency vs. throughput tradeoff to
make.  For this reason, to help guarantee latency, the websocket system reserves
the right to occasionally drop the connection, forcing the client to request a
new URL, which has the effect of rebalancing the distribution of connections to
workers, helping to ensure lower latency overall.</p>
<p>In this document we describe:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#connecting"><span class="std std-ref">Connecting</span></a>: How to get a websocket URL and make and maintain a connection.</p></li>
<li><p><a class="reference internal" href="#message-format"><span class="std std-ref">Message format</span></a>: The message format used to send commands and receive responses.</p></li>
<li><p><a class="reference internal" href="#ws-python-interface"><span class="std std-ref">Python interface</span></a>: How to use this Python library to communicate over the websocket.</p></li>
</ul>
<p>Examples of using the websocket connection from the Python API as well as
communicating with the websocket from JavaScript in a browser application are
given in <a class="reference internal" href="../../examples/websocket.html#websocket-examples"><span class="std std-ref">Daisys API websocket examples</span></a>.</p>
</section>
<section id="connecting">
<span id="id1"></span><h2>Connecting<a class="headerlink" href="#connecting" title="Link to this heading">¶</a></h2>
<p>In order to connect to a Daisys worker node, you must first be assigned a node
through the API.  In Python, this is taken care of for you, see
<a class="reference internal" href="#ws-python-interface"><span class="std std-ref">Python interface</span></a> below.  However, when using another language or
<code class="docutils literal notranslate"><span class="pre">curl</span></code>, you can get a URL via the <a class="reference internal" href="endpoints.html#websocket-endpoint"><span class="std std-ref">Websocket Endpoints</span></a> using a GET
request.</p>
<p>As mentioned there, the websocket may disconnect between requests for
rebalancing worker load, although this should not happen frequently.
Additionally it is assumed that a websocket connection is for interaction with a
specific model, which must be included in the URL.  In fact any model can be
used on a websocket connection but only the specified model shall be kept from
being unloaded, therefore if latency is at issue, it is recommended to open a
websocket connection per model.  A reconnection scheme can be used to
immediately request a new worker URL and reconnect if the connection is
dropped. The Daisys API shall make every effort to ensure that all current
requests are handled and results delivered before dropping any connections.</p>
</section>
<section id="message-format">
<span id="id2"></span><h2>Message format<a class="headerlink" href="#message-format" title="Link to this heading">¶</a></h2>
<p>In cases where you are not using Python and wish to develop your own client for
the websocket, the format is kept rather simple and should be quite approachable
for any language for which a websocket library is available.</p>
<p>Websocket supports text and bytes (binary) messages.  Commands are sent using
text messages, and status messages (text) and audio messages (bytes) are
received.  Both outgoing and incoming text messages are in JSON format.</p>
<p>Outgoing messages have the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;command&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span><span class="p">},</span> <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">request_id</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">command</span></code> may be one of <code class="docutils literal notranslate"><span class="pre">/takes/generate</span></code> or <code class="docutils literal notranslate"><span class="pre">/voices/generate</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> field corresponds to the same POST body given to the corresponding
commands, i.e. the <a class="reference internal" href="models.html#daisys.v1.speak.models.TakeGenerate" title="daisys.v1.speak.models.TakeGenerate"><code class="xref py py-class docutils literal notranslate"><span class="pre">TakeGenerate</span></code></a>
and <a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceGenerate" title="daisys.v1.speak.models.VoiceGenerate"><code class="xref py py-class docutils literal notranslate"><span class="pre">VoiceGenerate</span></code></a> structures,
respectively.</p>
<p>Likewise, the status messages received for each correspond to the responses to
those same commands, these being <a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TakeGenerate</span></code></a> and <a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceInfo" title="daisys.v1.speak.models.VoiceInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TakeGenerate</span></code></a>, respectively.  They are similarly bundled
into a response structure,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span><span class="p">},</span> <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">request_id</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>Special to the websocket connection is <code class="docutils literal notranslate"><span class="pre">request_id</span></code>, which is needed to track
which incoming responses go with which outgoing requests.  Because websockets do
not guarantee message order (shorter messages may arrive before longer
messages), and because a <code class="docutils literal notranslate"><span class="pre">take_id</span></code> is not known until the first status message
is received, there is no way to know which audio goes with which
request. Therefore the <code class="docutils literal notranslate"><span class="pre">request_id</span></code> is a user-provided identifier, a string or
an integer, which is included with the responses to that command.  A simple
incrementing integer per connection is recommended, and is what the Python
interface implements.</p>
<p>Audio response messages are also simple, however since it is necessary to carry
some metadata, they contain two sections, delimited by a length prefix.  Audio
messages (bytes) are formatted thus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JSON</span><span class="o">&lt;</span><span class="n">length</span> <span class="mi">4</span> <span class="nb">bytes</span><span class="o">&gt;&lt;</span><span class="n">json</span> <span class="n">metadata</span><span class="o">&gt;</span><span class="n">RIFF</span><span class="o">..</span>
</pre></div>
</div>
<p>That is, they start with the literal string <code class="docutils literal notranslate"><span class="pre">JSON</span></code> followed by a 32-bit little
endian integer indicating how long the metadata section is.  The metadata
section can be converted to a string and parsed as JSON.  This is immediately
followed by a <code class="docutils literal notranslate"><span class="pre">.wav</span></code> file header, which always starts with the literal string
<code class="docutils literal notranslate"><span class="pre">RIFF</span></code>.  Therefore, starting at <code class="docutils literal notranslate"><span class="pre">R</span></code>, the rest of the bytes can be passed to
an audio player or a wav file parsing routine if chunking is not used.</p>
<p>The metadata section consists of the following fields,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;take_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;take_id&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;part_id&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;chunk_id&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">request_id</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">part_id</span></code> and <code class="docutils literal notranslate"><span class="pre">chunk_id</span></code> are incrementing integers as specified in the
next section, and <code class="docutils literal notranslate"><span class="pre">request_id</span></code> reflects whatever was provided when the
associated command was issued.</p>
</section>
<section id="parts-and-chunks">
<h2>Parts and chunks<a class="headerlink" href="#parts-and-chunks" title="Link to this heading">¶</a></h2>
<p>If multiple sentences have been provided, then they are returned with separate
<code class="docutils literal notranslate"><span class="pre">part_id</span></code> values, which are an incrementing integer, where each part consists
of a complete wav file.  The end of the stream for a take is indicated by a new
<code class="docutils literal notranslate"><span class="pre">part_id</span></code> that has 0 bytes of audio.</p>
<p>If chunking is enabled, the bytes must be concatenated to an existing part
stream, either in real time or before writing the part to a file.  Chunks are
different from parts in that they are not prepended with a wav header, but are
merely the individual pieces of a part that is not yet fully received.  Similar
to parts, chunks are identified with an incrementing integer <code class="docutils literal notranslate"><span class="pre">chunk_id</span></code> which
must be used to put them in order before playback. Also similar, the end of the
chunk stream for a part is indicated by a new <code class="docutils literal notranslate"><span class="pre">chunk_id</span></code> being accompanied
with 0 bytes of audio.</p>
<p>Finally then, a stream of parts without chunking appears like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">12340</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">23450</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>and with chunking,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">4140</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">4140</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">4140</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">4140</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="n">part_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">chunk_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">audio</span> <span class="nb">len</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>The above is for visual explanation only, in reality the <code class="docutils literal notranslate"><span class="pre">take_id</span></code> and
<code class="docutils literal notranslate"><span class="pre">request_id</span></code> are also included in the metadata header in order to know which
audio is for which stream.</p>
<p>I a <code class="docutils literal notranslate"><span class="pre">/voices/generate</span></code> message was requested, audio of the associated example
take will be sent.  However the status message will be a <a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceInfo" title="daisys.v1.speak.models.VoiceInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TakeGenerate</span></code></a> object, and the <code class="docutils literal notranslate"><span class="pre">take_id</span></code> included in the
audio messages will correspond with its <code class="docutils literal notranslate"><span class="pre">example_take_id</span></code> field.</p>
</section>
<section id="python-interface">
<span id="ws-python-interface"></span><h2>Python interface<a class="headerlink" href="#python-interface" title="Link to this heading">¶</a></h2>
<p>The Python interface consists of calling, <code class="xref py py-func docutils literal notranslate"><span class="pre">websocket()</span></code> of the client
object (see <a class="reference internal" href="clients.html"><span class="doc">Daisys API clients</span></a>), in a <code class="docutils literal notranslate"><span class="pre">with</span></code> context manager, which returns
respectively one of the following objects.  For example,</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Streaming audio, websocket method</span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">daisys</span><span class="w"> </span><span class="kn">import</span> <span class="n">DaisysAPI</span>
<span class="linenos">2</span><span class="k">with</span> <span class="n">DaisysAPI</span><span class="p">(</span><span class="s1">&#39;speak&#39;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;pw&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">speak</span><span class="p">:</span>
<span class="linenos">3</span>    <span class="k">with</span> <span class="n">speak</span><span class="o">.</span><span class="n">websocket</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;theatrical-v2&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ws</span><span class="p">:</span>
<span class="linenos">4</span>        <span class="o">....</span>
<span class="linenos">5</span>        <span class="n">request_id</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">generate_take</span><span class="p">(</span><span class="o">...</span>
</pre></div>
</div>
</div>
<p>In each case, you can then issue a command to generate a take or a voice using
the returned context object, as demonstrated above.  Subsequently the callbacks
you provide get called whenever messages are received on the websocket
containing either status information or audio data.</p>
<dl class="py class" id="module-daisys.v1.speak.sync_websocket">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">daisys.v1.speak.sync_websocket.</span></span><span class="sig-name descname"><span class="pre">DaisysSyncSpeakWebsocketV1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="clients.html#daisys.v1.speak.sync_client.DaisysSyncSpeakClientV1" title="daisys.v1.speak.sync_client.DaisysSyncSpeakClientV1"><span class="pre">DaisysSyncSpeakClientV1</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1" title="Link to this definition">¶</a></dt>
<dd><p>Wrapper for Daisys v1 API websocket connection, synchronous version.</p>
<p>This class is intended to be used in a <code class="docutils literal notranslate"><span class="pre">with</span></code> clause.</p>
<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Disconnect this websocket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.generate_take">
<span class="sig-name descname"><span class="pre">generate_take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">voice_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_language</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prosody</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.SimpleProsody" title="daisys.v1.speak.models.SimpleProsody"><span class="pre">SimpleProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.AffectProsody" title="daisys.v1.speak.models.AffectProsody"><span class="pre">AffectProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.SignalProsody" title="daisys.v1.speak.models.SignalProsody"><span class="pre">SignalProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.StreamOptions" title="daisys.v1.speak.models.StreamOptions"><span class="pre">StreamOptions</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_webhook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done_webhook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse"><span class="pre">TakeResponse</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audio_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.generate_take" title="Link to this definition">¶</a></dt>
<dd><p>Generate a “take”, an audio file containing an utterance of the given text by
the given voice.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>voice_id</strong> – The id of the voice to be used for generating audio.  The voice is
attached to a specific model.</p></li>
<li><p><strong>text</strong> – The text that the voice should say.</p></li>
<li><p><strong>override_language</strong> – Normally a language classifier is used to detect the language
of the speech; this allows for multilingual sentences.
However, if the language should be enforced, it should be
provided here.  Currently accepted values are “nl-NL” and
“en-GB”.</p></li>
<li><p><strong>style</strong> – A list of styles to enable when speaking.  Note that most styles are
mutually exclusive, so a list of 1 value should be provided.  Accepted
styles can be retrieved from the associated voice’s VoiceInfo.styles
or the model’s TTSModel.styles field.  Note that not all models
support styles, thus this can be left empty if specific styles are not
desired.</p></li>
<li><p><strong>prosody</strong> – The characteristics of the desired speech not determined by the voice or
style.  Here you can provide a SimpleProsody or most models also accept
the more detailed AffectProsody.</p></li>
<li><p><strong>stream_options</strong> – Configuration for streaming.</p></li>
<li><p><strong>status_webhook</strong> – An optional URL to be called using <code class="docutils literal notranslate"><span class="pre">POST</span></code> whenever the take’s
status changes, with <code class="xref py py-class docutils literal notranslate"><span class="pre">TakeResponse</span></code> in the body content.</p></li>
<li><p><strong>done_webhook</strong> – An optional URL to be called exactly once using <code class="docutils literal notranslate"><span class="pre">POST</span></code> when the
take is <code class="docutils literal notranslate"><span class="pre">READY</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, or <code class="docutils literal notranslate"><span class="pre">TIMEOUT</span></code>, with
<code class="xref py py-class docutils literal notranslate"><span class="pre">TakeResponse</span></code> in the body content.</p></li>
<li><p><strong>status_callback</strong> – An optional function to call for status updates regarding this take.</p></li>
<li><p><strong>audio_callback</strong> – An optional function to call to provide the audio parts of the take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Information about the take being generated, including status.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse">TakeResponse</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.generate_voice">
<span class="sig-name descname"><span class="pre">generate_voice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gender</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceGender" title="daisys.v1.speak.models.VoiceGender"><span class="pre">VoiceGender</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_style</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_prosody</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.SimpleProsody" title="daisys.v1.speak.models.SimpleProsody"><span class="pre">SimpleProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.AffectProsody" title="daisys.v1.speak.models.AffectProsody"><span class="pre">AffectProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.SignalProsody" title="daisys.v1.speak.models.SignalProsody"><span class="pre">SignalProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">example_take</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeGenerateWithoutVoice" title="daisys.v1.speak.models.TakeGenerateWithoutVoice"><span class="pre">TakeGenerateWithoutVoice</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.StreamOptions" title="daisys.v1.speak.models.StreamOptions"><span class="pre">StreamOptions</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done_webhook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse"><span class="pre">TakeResponse</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audio_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.generate_voice" title="Link to this definition">¶</a></dt>
<dd><p>Generate a random, novel voice for a given model with desired properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – A name to give the voice, may be any string, and does not need to be unique.</p></li>
<li><p><strong>model</strong> – The name of the model for this voice.</p></li>
<li><p><strong>gender</strong> – The gender of this voice.</p></li>
<li><p><strong>description</strong> – The description of this voice.</p></li>
<li><p><strong>default_style</strong> – An optional list of styles to associate with this voice by
default.  It can be overriden by a take that uses this voice.
Note that most styles are mutually exclusive, and not all
models support styles.</p></li>
<li><p><strong>default_prosody</strong> – An optional default prosody to associate with this voice.  It
can be overridden by a take that uses this voice.</p></li>
<li><p><strong>example_take</strong> – Information on the take to generate as an example of this voice.</p></li>
<li><p><strong>stream_options</strong> – Configuration for streaming.</p></li>
<li><p><strong>done_webhook</strong> – An optional URL to call exactly once using POST when the voice
is available, with VoiceInfo in the body content.</p></li>
<li><p><strong>status_callback</strong> – An optional function to call for status updates regarding this take.</p></li>
<li><p><strong>audio_callback</strong> – An optional function to call to provide the audio parts of the take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Information about the generated voice.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceInfo" title="daisys.v1.speak.models.VoiceInfo">VoiceInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.iter_request">
<span class="sig-name descname"><span class="pre">iter_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.iter_request" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over incoming text and audio messages for a given request_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request_id</strong> – The id value associated with the request to be iterated over.
Returned by <code class="xref py py-meth docutils literal notranslate"><span class="pre">take_generate()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">voice_generate()</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>An Iterator yielding tuples (<code class="docutils literal notranslate"><span class="pre">take_id</span></code>, <code class="docutils literal notranslate"><span class="pre">take</span></code>, <code class="docutils literal notranslate"><span class="pre">header</span></code>,
<code class="docutils literal notranslate"><span class="pre">audio</span></code>), where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">take_id</span></code>: the take_id associated with this request</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">take</span></code>: the TakeResponse information if a text message, otherwise None</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code>: the wav header if any, otherwise None</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">audio</span></code>: the audio bytes, if a binary message, otherwise None</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.reconnect">
<span class="sig-name descname"><span class="pre">reconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.reconnect" title="Link to this definition">¶</a></dt>
<dd><p>Reconnect this websocket, by first fetching the URL and then opening the conneciton to it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.update" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a waiting message on the open websocket connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Number of seconds to wait. Can be 0 if non-blocking usage is desired.
If None, wait forever.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class" id="module-daisys.v1.speak.async_websocket">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">daisys.v1.speak.async_websocket.</span></span><span class="sig-name descname"><span class="pre">DaisysAsyncSpeakWebsocketV1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="clients.html#daisys.v1.speak.async_client.DaisysAsyncSpeakClientV1" title="daisys.v1.speak.async_client.DaisysAsyncSpeakClientV1"><span class="pre">DaisysAsyncSpeakClientV1</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voice_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1" title="Link to this definition">¶</a></dt>
<dd><p>Wrapper for Daisys v1 API websocket connection, asynchronous version.</p>
<p>This class is intended to be used in an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> clause.</p>
<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.disconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Disconnect this websocket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.generate_take">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_take</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">voice_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_language</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prosody</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.SimpleProsody" title="daisys.v1.speak.models.SimpleProsody"><span class="pre">SimpleProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.AffectProsody" title="daisys.v1.speak.models.AffectProsody"><span class="pre">AffectProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.SignalProsody" title="daisys.v1.speak.models.SignalProsody"><span class="pre">SignalProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.StreamOptions" title="daisys.v1.speak.models.StreamOptions"><span class="pre">StreamOptions</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_webhook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done_webhook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse"><span class="pre">TakeResponse</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audio_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.generate_take" title="Link to this definition">¶</a></dt>
<dd><p>Generate a “take”, an audio file containing an utterance of the given text by
the given voice.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>voice_id</strong> – The id of the voice to be used for generating audio.  The voice is
attached to a specific model.</p></li>
<li><p><strong>text</strong> – The text that the voice should say.</p></li>
<li><p><strong>override_language</strong> – Normally a language classifier is used to detect the language
of the speech; this allows for multilingual sentences.
However, if the language should be enforced, it should be
provided here.  Currently accepted values are “nl-NL” and
“en-GB”.</p></li>
<li><p><strong>style</strong> – A list of styles to enable when speaking.  Note that most styles are
mutually exclusive, so a list of 1 value should be provided.  Accepted
styles can be retrieved from the associated voice’s VoiceInfo.styles
or the model’s TTSModel.styles field.  Note that not all models
support styles, thus this can be left empty if specific styles are not
desired.</p></li>
<li><p><strong>prosody</strong> – The characteristics of the desired speech not determined by the voice or
style.  Here you can provide a SimpleProsody or most models also accept
the more detailed AffectProsody.</p></li>
<li><p><strong>stream_options</strong> – Configuration for streaming.</p></li>
<li><p><strong>status_webhook</strong> – An optional URL to be called using <code class="docutils literal notranslate"><span class="pre">POST</span></code> whenever the take’s
status changes, with <code class="xref py py-class docutils literal notranslate"><span class="pre">TakeResponse</span></code> in the body content.</p></li>
<li><p><strong>done_webhook</strong> – An optional URL to be called exactly once using <code class="docutils literal notranslate"><span class="pre">POST</span></code> when the
take is <code class="docutils literal notranslate"><span class="pre">READY</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, or <code class="docutils literal notranslate"><span class="pre">TIMEOUT</span></code>, with
<code class="xref py py-class docutils literal notranslate"><span class="pre">TakeResponse</span></code> in the body content.</p></li>
<li><p><strong>status_callback</strong> – An optional function to call for status updates regarding this take.</p></li>
<li><p><strong>audio_callback</strong> – An optional function to call to provide the audio parts of the take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Information about the take being generated, including status.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse">TakeResponse</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.generate_voice">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_voice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gender</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceGender" title="daisys.v1.speak.models.VoiceGender"><span class="pre">VoiceGender</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_style</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_prosody</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.SimpleProsody" title="daisys.v1.speak.models.SimpleProsody"><span class="pre">SimpleProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.AffectProsody" title="daisys.v1.speak.models.AffectProsody"><span class="pre">AffectProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.SignalProsody" title="daisys.v1.speak.models.SignalProsody"><span class="pre">SignalProsody</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">example_take</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeGenerateWithoutVoice" title="daisys.v1.speak.models.TakeGenerateWithoutVoice"><span class="pre">TakeGenerateWithoutVoice</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#daisys.v1.speak.models.StreamOptions" title="daisys.v1.speak.models.StreamOptions"><span class="pre">StreamOptions</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done_webhook</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="models.html#daisys.v1.speak.models.TakeResponse" title="daisys.v1.speak.models.TakeResponse"><span class="pre">TakeResponse</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">audio_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.generate_voice" title="Link to this definition">¶</a></dt>
<dd><p>Generate a random, novel voice for a given model with desired properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – A name to give the voice, may be any string, and does not need to be unique.</p></li>
<li><p><strong>model</strong> – The name of the model for this voice.</p></li>
<li><p><strong>gender</strong> – The gender of this voice.</p></li>
<li><p><strong>description</strong> – The description of this voice.</p></li>
<li><p><strong>default_style</strong> – An optional list of styles to associate with this voice by
default.  It can be overriden by a take that uses this voice.
Note that most styles are mutually exclusive, and not all
models support styles.</p></li>
<li><p><strong>default_prosody</strong> – An optional default prosody to associate with this voice.  It
can be overridden by a take that uses this voice.</p></li>
<li><p><strong>example_take</strong> – Information on the take to generate as an example of this voice.</p></li>
<li><p><strong>stream_options</strong> – Configuration for streaming.</p></li>
<li><p><strong>done_webhook</strong> – An optional URL to call exactly once using POST when the voice
is available, with VoiceInfo in the body content.</p></li>
<li><p><strong>status_callback</strong> – An optional function to call for status updates regarding this take.</p></li>
<li><p><strong>audio_callback</strong> – An optional function to call to provide the audio parts of the take.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Information about the generated voice.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="models.html#daisys.v1.speak.models.VoiceInfo" title="daisys.v1.speak.models.VoiceInfo">VoiceInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.iter_request">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">iter_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.iter_request" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over incoming text and audio messages for a given request_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request_id</strong> – The id value associated with the request to be iterated over.
Returned by <code class="xref py py-meth docutils literal notranslate"><span class="pre">take_generate()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">voice_generate()</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>An Iterator yielding tuples (<code class="docutils literal notranslate"><span class="pre">take_id</span></code>, <code class="docutils literal notranslate"><span class="pre">take</span></code>, <code class="docutils literal notranslate"><span class="pre">header</span></code>,
<code class="docutils literal notranslate"><span class="pre">audio</span></code>), where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">take_id</span></code>: the take_id associated with this request</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">take</span></code>: the TakeResponse information if a text message, otherwise None</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code>: the wav header if any, otherwise None</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">audio</span></code>: the audio bytes, if a binary message, otherwise None</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.reconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.reconnect" title="Link to this definition">¶</a></dt>
<dd><p>Reconnect this websocket, by first fetching the URL and then opening the conneciton to it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.update">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.update" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a waiting message on the open websocket connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Number of seconds to wait. In the async implementation this cannot be 0.
If None, wait forever.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="endpoints.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Daisys API endpoints</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="models.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Daisys API JSON models</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Daisys AI
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Daisys API websockets</a><ul>
<li><a class="reference internal" href="#latency-vs-throughput">Latency vs. throughput</a></li>
<li><a class="reference internal" href="#connecting">Connecting</a></li>
<li><a class="reference internal" href="#message-format">Message format</a></li>
<li><a class="reference internal" href="#parts-and-chunks">Parts and chunks</a></li>
<li><a class="reference internal" href="#python-interface">Python interface</a><ul>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1</span></code></a><ul>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.disconnect"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.generate_take"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1.generate_take()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.generate_voice"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1.generate_voice()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.iter_request"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1.iter_request()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.reconnect"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1.reconnect()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.sync_websocket.DaisysSyncSpeakWebsocketV1.update"><code class="docutils literal notranslate"><span class="pre">DaisysSyncSpeakWebsocketV1.update()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1</span></code></a><ul>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.disconnect"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.generate_take"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1.generate_take()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.generate_voice"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1.generate_voice()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.iter_request"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1.iter_request()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.reconnect"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1.reconnect()</span></code></a></li>
<li><a class="reference internal" href="#daisys.v1.speak.async_websocket.DaisysAsyncSpeakWebsocketV1.update"><code class="docutils literal notranslate"><span class="pre">DaisysAsyncSpeakWebsocketV1.update()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=58fbf978"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>